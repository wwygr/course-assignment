# course-assignment
语言：matlab

简介：三角函数计算器设计
## 水平线

___

---

***

# 1可行性分析
## 1.1编写目的
&emsp;&emsp;**通过对《现代软件工程》课程的学习，为明确软件需求、安排项目规划与进度、组织软件开发与测
试，小组合作设计三角函数计算器。该说明书在概要设计的基础上，进一步细化系统结构，与此同时，开发人员也
可加深对课程中可行性分析、需求分析、总体设计、详细设计等的理解。在程序设计中，通过设计、编制、调试一
个模拟计算器的程序，加深对语法及语义分析原理的理解，并实现对命令语句的灵活应用。在程序设计中，可以用
两种方法解决问题：一是传统的结构化程序设计方法，二是面向对象的程序设计方法。而在面向对象程序设计中关
键是如何将问题域中的实体（即日常所见的概念）抽取出来，作为MATLAB程序中的类，而属性与行为作为类的两类
要素通常是必不可少的，甚至还应考虑类必须满足的约束。
本文档供设计人员、开发人员、课程老师与同学参考。**
## 1.2背景
&emsp;&emsp;**计算器是日常生活中十分便捷有效的工具，能实现加、减、乘、除、求三角函数等运算的简单工具。
要实现计算功能，可以用MATLAB的知识编写程序来解决此问题。该计算器大大的降低了数字计算的难度以及提高了
计算的准确度和精确度。该计算器使用非常简单和方便，对学生和老师的计算工作有辅助作用。在课程设计中，系
统开发平台为Windows,程序设计语言为MATLAB。**  
&emsp;&emsp;**在软件设计过程中，有以下几点背景需进行说明：**  
1. **待开发的软件系统的名称：MATLAB**
2. **本项目的任务提出者、开发者、用户及实现该软件的计算中心或计算机网络：**  
&emsp;**任务提出者：覃剑老师**  
&emsp;**开发者：王纪伟、钱杨萍、王云、覃彪、黄强**  
&emsp;**用户：《现代软件工程》课程的所有老师与同学**  
&emsp;**计算机网络：重庆大学校园网**  
&emsp;**管理中心：GitHub**
3. **该软件系统同其他系统或其他机构的基本的相互来往关系：由重庆大学技术部门。**   

## 1.3定义
&emsp;&emsp;**MATLAB：功能强大且灵活的编程语言和开发环境，具有高效的数值计算及符号计算功能，具有完备
的图形处理功能，实现计算结果和编程的可视化，为用户提供了大量方便实用的处理工具。**   
## 1.4参考资料  
&emsp;&emsp;**GB/T 11457:软件工程术语。**  
&emsp;&emsp;**GB/T 8566 -1995:计算机软件开发规范。**  
&emsp;&emsp;**GB 8567:计算机软件产品开发文件编制指南。**    
# 2概要设计
## 2.1目标
&emsp;&emsp;**叙述该项软件开发的意图旨在利用GitHub进行git群体开发一款三角函数计算器（不调用库函数）实现
sin、cos、tan、arcsin、arccos、arctan、弧度制以及角度制这八种功能。要求每位组员建立GitHub账号，组长建
立工程库，管理master分支，且将界面美观简洁和测试功能列入考察范围。用于编程的语言以C++、MATLAB、python
为主要语言，任选其一。本软件产品是一项独立的软件，而且全部内容自含，并且本软件有一定的拓展空间用于未来升
级。**  
## 2.2用户的特点
&emsp;&emsp;**本次软件开发最终用户是面向与《现代软件工程》课程相关的在校研究生或博士同学与老师，本次开发
主要用于同学老师们的交流与练习。**
## 2.3项目约束
&emsp;&emsp;**此软件只是课程练习，截止日期为2022年4月1日星期五，为课程中期作业。**
## 2.4总体设计
### 2.4.1系统设计流程
&emsp;&emsp;**系统设计主要有五部分组成：需求分析、概要设计、详细设计、编写代码、系统测试。具体流程如下图2
.1所示：**
![图2.1](https://github.com/wwygr/tri-fanc/blob/main/picture/pic1.png)  
&emsp;&emsp;**程序的系统结构图如下图2.2所示：**  
![图2.2](https://github.com/wwygr/tri-fanc/blob/main/picture/pic2.png)
#### &emsp;（1）需求分析
&emsp;&emsp;**本次课程设计的题目是实现简单计算器的功能。实现功能：sin、cos、tan、arcsin、arccos、arctan
、弧度制以及角度制，可增加其它运算功能，还需要实现数据的输入、输出、计算、显示以及清除等功能。三角函数计
算器的数据流图如下图2.3所示：**    
![图2.3](https://github.com/wwygr/tri-fanc/blob/main/picture/pic3.png)
#### &emsp;（2）概要设计
&emsp;&emsp;**计算器包含的功能有：sin、cos、tan、arcsin、arccos、arctan、弧度制以及角度制。三角函数计算
器界面相对简单，交互逻辑并不复杂。因此界面设计不采用大型的界面设计平台，MFC、WinForm或者WPF。同时不考虑
跨平台的需求，故不使用Qt界面设计平台。因此考虑Windows系统命令行界面（CLI）：Windows 控制台。Windows控制
台是用于输入和显示系统用户消息的设备，尤指来自于BIOS和boot loader的信息。现今，与控制台的沟通被抽象化了
，通过标准流（stdin, stdout,，和 stderr）进行，但也存在系统特定的接口。**  
&emsp;&emsp;**在Windows控制台上进行界面设计的好处在于，现如今主流的Windows操作系统Windows 7与Windows 10
系统安装时都默认安装控制台程序。设计好的程序无需其他运行环境即可直接在Windows系统上运行。**  
&emsp;&emsp;**本工程的界面设计采用Windows系统中的控制台进行分割绘制，并通过系统API函数完成界面逻辑。**
#### &emsp;（2）详细设计
&emsp;&emsp;**详细设计部分则是在概要设计的基础上对计算器的功能实现作出更为详细的介绍。主要对各设计快中的各
个类做出说明，包括对每个类如何在以后的程序定义作出介绍，并作出相应的说明，并对各个参数做出介绍。**  
#### &emsp;（2）编写代码
&emsp;&emsp;**这一部分主要根据前面的详细设计内容用具体语言实现计算器系统，主要采用MATLAB语言实现，这一部分
主要是代码实现，将前一阶段的设计思想实现，前面已经对该系统的整体设计思路和整体框架做出了说明，并且在详细设
计部分对每个设计块中的类如何实现也已给出。三角函数计算器的程序流程图如下图2.4所示：**  
![图2.4](https://github.com/wwygr/tri-fanc/blob/main/picture/pic4.png)  
#### &emsp;（2）系统测试
&emsp;&emsp;**系统测试部分主要对前面已经实现的系统做出测试，看该系统是否符合系统设计要求，并对一些特殊的数
据进行测试；比如一些数的取值，看是否符合要求。在测试的基础上，对发现的错误进行改正，使系统逐步得到完善，在
得到用户的反馈后，对系统做出修改。**  
&emsp;&emsp;**计算器系统主要采用了软件工程的设计思路，从需求分析、概要设计、详细设计、编写代码直到系统测试
都遵从软件工程的设计要求。**  
### 2.4.2功能设计
1. **计算器包含的功能有：sin、cos、tan、arcsin、arccos、arctan、弧度制以及角度制、清除。**
2. **每种计算功能均为独立设计算法。**  

## 2.5系统设计思想
&emsp;&emsp;**一个系统设计的根本目的就是真正满足用户的实际需求，并采用先进、安全、成熟、可靠的技术来实现。
鉴于当今技术发展的趋势，结合本程序的实现难易程度和工作量，我们采用了MATLAB技术开发。本着既要保证系统的安
全性、稳定性、高效性，又要为用户提供实用、方便、高效的操作环境的设计思想来进行分析设计的。**  
&emsp;&emsp;**程序尽可能的方便使用者的使用，操作简单。程序的安全性是指程序中所有数据的安全性，它包括数据
完整性、可用性、可控性等。数据完整性就是防止数据的丢失或者精度的损失，对此本程序对数据尽可能的使用精度高
的数据包括数据类型之间的转换。数据可用性就是保证存在数据不同的操作之间的连续使用。**  
# 3需求分析 
&emsp;&emsp;**软件设计之源在于用户，设计之本便是满足用户的需求。所以需求分析将从用户需求出发，导出业务需
求与功能需求。**
## 3.1用户需求
&emsp;&emsp;**用户需求来自于产品的真正使用者，而本产品是设计一个简单的三角函数计算器，让用户能够轻松使用
对sin、cos、tan、arcsin、arccos、arctan六个函数的计算功能。在此基础上，我们考虑到对功能需求中的精度规
定、界面设计以及调试功能等等。**  
## 3.2功能需求
### 3.2.1 基本功能需求
&emsp;&emsp;**三角函数计算器首先应实现六个三角函数功能，考虑到不能使用库函数的条件下。使用数学方法，分别
求出六个三角函数泰勒展开式，将复杂的三角函数运算转化为乘加运算。三角函数方法入口参数与返回值都为double类
型。返回值精度为小数点后第12位。**  
&emsp;&emsp;**三角函数方法运行时间不宜过长，避免用户使用过程中体会到明显的卡顿。要求三角函数一次计算时间
不得超过300ms。例如考虑到三角函数泰勒展开式的收敛问题，三角函数应对特殊值进行特殊处理。避免收敛过慢导致
方法运行时间过长。**  
&emsp;&emsp;**三角函数方法需要对函数入口参数进行规范，例如sin函数定义域为[-1,1]，对于大于1或小于-1的数据
应该进行对应的处理。三角函数的计算可选择角度制与弧度制。三角函数状态迁移图如下图3.1所示：**  
![图3.1](https://github.com/wwygr/tri-fanc/blob/main/picture/pic5.png) 
### 3.2.2 界面调试需求
&emsp;&emsp;**三角函数计算器界面应该实现基本计算器的界面布局，应该包含至少两个显示区域：输入显示区域、计
算结果显示区域。24个按键区域：10个数字按键、6个三角函数按键、1个小数点按键、1个符号按键（正负号）、1个清
屏按键、1个退格按键、1个π按键、一个除号按键、角度制和弧度制按键。**  
&emsp;&emsp;**计算器界面应实现获取各个按键的点击事件，并实现对应的回调函数。**  
&emsp;&emsp;**考虑到输入参数的简单，仅包括输入1个数字与输入对应的三角函数。因此界面需考虑简单的防用户输入
出错的问题。例如：输入数字是，小数点应当只有一个，当输入了一个小数点后，用户在此点击小数点按键应不作反应。
负号的输入同理，输入的负号应在数字的最前面，同时二次点击负号按键时，应当为取消负号，而不是键入两个负号。**
## 3.3其他需求
&emsp;&emsp;**测试程序设计应保证数据与界面的分离，本工程中应保证三角函数的设计与界面设计分离。**  
&emsp;&emsp;**三角函数应使用数学方法计算出结果，方便程序的修改与移植。**  
&emsp;&emsp;**界面设计应尽量保证增删按钮或功能简单快捷。**  
# 4程序设计
## 4.1界面设计
&emsp;&emsp;**三角函数计算器界面相对简单，交互逻辑并不复杂。因此界面设计不采用大型的界面设计平台，MFC、Win
Form或者WPF。同时不考虑跨平台的需求，故不使用Qt界面设计平台。**  
&emsp;&emsp;**因此考虑Windows系统命令行界面（CLI）：Windows 控制台。Windows控制台是用于输入和显示系统用户
消息的设备，尤指来自于BIOS和boot loader的信息。它是由键盘和屏幕组成的物理设备，屏幕一般是文本终端（text t
erminal），但也可以是图形终端（graphical terminal）。现今，与控制台的沟通被抽象化了，通过标准流（stdin, 
stdout,，和 stderr）进行，但也存在系统特定的接口。**  
&emsp;&emsp;**在Windows控制台上进行界面设计的好处在于，现如今主流的Windows操作系统Windows 7与Windows 10系
统安装时都默认安装控制台程序。设计好的程序无需其他运行环境即可直接在Windows系统上运行。**  
&emsp;&emsp;**综上，本工程的界面设计采用Windows系统中的控制台进行分割绘制，并通过系统API函数完成界面逻辑。
程序设计语言使用MATLAB。界面的handles类如下图4.1所示：**  
![图4.1](https://github.com/wwygr/tri-fanc/blob/main/picture/pic6.png) 
### 4.1.2 计算器界面设计
&emsp;&emsp;**Matlab的guide命令可以启动一个UI设计环境guide。在考虑进行按键与显示区域的绘制、点击事件获取和
响应函数调用的设计时发现，存在大量重复操作。例如每一个按键区域与显示区域类初始化，按键点击位置是否落入按键
区域判断，点击响应函数的调用等等。且增加或删除按键区域时，每一个地方都必须对应修改，过于繁琐。因此程序设计
了不同的子函数控制相应的区域，部分代码如下图4.2所示，此处仅截取一部分，详细代码见GitHub。界面图形如下图4.3
所示。**
![图4.2](https://github.com/wwygr/tri-fanc/blob/main/picture/pic7.png) ![图4.3](https://github.com/wwygr/tri-fanc/blob/main/picture/pic8.png) 
## 4.2三角函数接口及数据类型
&emsp;&emsp;**sin、cos、tan、arcsin、arccos、arctan六个函数分别放进六个子函数中，通过子函数的方式调用。返
回值保留到小数点后第12位，函数名如下：mysin,mycosm,mytan,myasin,myacos,myatan。函数名格式如下所示：**  
&emsp;&emsp;&emsp;&emsp;Function 三角函数名(input,mode)  
&emsp;&emsp;**其中input为输入数据，数据结构为long类型，mode为角度值和弧度制，数据结构为bool型，‘0’表示角
度制，‘1’表示弧度制。**  
&emsp;&emsp;**为了不引起歧义，三角函数与MATLAB标准函数库三角函数不同名。 程序中还包含一些异常判断，比如arcsi
n函数定义域为[-1,1]，超出此范围将抛出异常，调用相应函数应处理此异常。**
## 4.3 编译与运行环境
&emsp;&emsp;**程序设计语言标准为MATLAB，编码成三个子文件。打包发布版exe文件无需安装特别运行环境。非跨平台，仅
Windows端可打开运行。**
